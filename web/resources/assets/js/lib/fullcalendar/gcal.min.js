/*
 * FullCalendar v1.5.4 Google Calendar Plugin
 *
 * Copyright (c) 2011 Adam Shaw
 * Dual licensed under the MIT and GPL licenses, located in
 * MIT-LICENSE.txt and GPL-LICENSE.txt respectively.
 *
 * Date: Tue Sep 4 23:38:33 2012 -0700
 *
 */
 
(function(c){var a=c.fullCalendar,f=a.formatDate,j=a.parseISO8601,k=a.addDays,l=a.applyAll;a.sourceNormalizers.push(function(b){if("gcal"==b.dataType||void 0===b.dataType&&(b.url||"").match(/^(http|https):\/\/www.google.com\/calendar\/feeds\//))b.dataType="gcal",void 0===b.editable&&(b.editable=!1)});a.sourceFetchers.push(function(b,a,m){if("gcal"==b.dataType){var n=b.success,a=c.extend({},b.data||{},{"start-min":f(a,"u"),"start-max":f(m,"u"),singleevents:!0,"max-results":9999}),g=b.currentTimezone;
g&&(a.ctz=g=g.replace(" ","_"));return c.extend({},b,{url:b.url.replace(/\/basic$/,"/full")+"?alt=json-in-script&callback=?",dataType:"jsonp",data:a,startParam:!1,endParam:!1,success:function(b){var a=[];b.feed.entry&&c.each(b.feed.entry,function(b,d){var h=d.gd$when[0].startTime,e=j(h,!0),f=j(d.gd$when[0].endTime,!0),h=-1==h.indexOf("T"),i;c.each(d.link,function(b,a){"text/html"==a.type&&(i=a.href,g&&(i+=(-1==i.indexOf("?")?"?":"&")+"ctz="+g))});h&&k(f,-1);a.push({id:d.gCal$uid.value,title:d.title.$t,
url:i,start:e,end:f,allDay:h,location:d.gd$where[0].valueString,description:d.content.$t})});var e=[a].concat(Array.prototype.slice.call(arguments,1)),e=l(n,this,e);return c.isArray(e)?e:a}})}});a.gcalFeed=function(b,a){return c.extend({},a,{url:b,dataType:"gcal"})}})(jQuery);